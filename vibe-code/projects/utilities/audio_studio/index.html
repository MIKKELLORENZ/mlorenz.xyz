<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Studio</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="main-layout">
        <!-- Header -->
        <header class="header">
            <h1>Audio Studio</h1>
            <div class="header-controls">
                <!-- Transport Controls -->
                <div class="transport">
                    <button id="recordBtn" class="transport-btn record-transport" aria-label="Record" title="Record from microphone (R)">‚è∫</button>
                    <button id="playPauseBtn" class="transport-btn" aria-label="Play/Pause" title="Play/Pause (Space)">‚ñ∂</button>
                    <button id="stopBtn" class="transport-btn" aria-label="Stop" title="Stop">‚èπ</button>
                    <button id="loopBtn" class="transport-btn" aria-label="Loop" title="Toggle Loop (L)">üîÅ</button>
                    <div class="time-display">
                        <span id="currentTime">00:00.000</span>
                        <span>/</span>
                        <span id="totalTime">00:00.000</span>
                    </div>
                    <div class="tempo-control">
                        <label>BPM: <input type="number" id="bpmInput" value="120" min="40" max="240"></label>
                    </div>
                    <div class="snap-control">
                        <label>
                            <input type="checkbox" id="snapEnabled" checked>
                            Snap
                        </label>
                        <select id="snapValue">
                            <option value="1">1 Bar</option>
                            <option value="0.5">1/2</option>
                            <option value="0.25" selected>1/4</option>
                            <option value="0.125">1/8</option>
                            <option value="0.0625">1/16</option>
                            <option value="0.03125">1/32</option>
                        </select>
                    </div>
                </div>
                <button id="exportBtn" class="export-btn" aria-label="Export project" title="Export project to WAV">Export Project</button>
            </div>
        </header>

        <div class="workspace">
            <!-- Main Content Area -->
            <div class="main-content">
                <!-- Timeline -->
                <div class="timeline-container">
                    <div class="timeline-header">
                        <div class="track-controls-spacer"></div>
                        <div class="timeline-ruler" id="timelineRuler"></div>
                    </div>
                </div>

                <!-- Tracks Container with Playhead -->
                <div class="tracks-wrapper">
                    <div class="timeline-playhead-overlay">
                        <div class="playhead" id="playhead"></div>
                    </div>
                    <div class="tracks-container" id="tracksContainer">
                        <!-- Tracks will be added here dynamically -->
                    </div>
                </div>

                <!-- Add Track Button -->
                <div class="add-track-container">
                    <button id="addTrackBtn" class="add-track-btn" aria-label="Add track" title="Add new track">
                        <svg width="24" height="24" viewBox="0 0 24 24">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
                        </svg>
                        Add Track
                    </button>
                </div>
            </div>

            <!-- Master Track (Vertical on Right) -->
            <div class="master-track">
                <div class="master-header">
                    <h3>Master</h3>
                    <button id="masterSettingsBtn" class="settings-btn" aria-label="Master settings" title="Master settings">‚öô</button>
                </div>
                <div class="master-fader">
                    <div class="vertical-slider-wrapper">
                        <input type="range" id="masterVolume" class="vertical-slider" min="0" max="1" step="0.01" value="0.8">
                    </div>
                    <span id="masterVolumeValue">-2 dB</span>
                </div>
                <div class="meter-container">
                    <div class="meter">
                        <div class="meter-bar" id="masterMeterL"></div>
                    </div>
                    <div class="meter">
                        <div class="meter-bar" id="masterMeterR"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Track Settings Modal -->
    <div id="trackSettingsModal" class="modal">
        <div class="modal-content wide">
            <span class="close">&times;</span>
            <h2>Track Settings</h2>
            
            <!-- Single page layout - no tabs -->
            <div class="settings-sections">
                <!-- EQ Section -->
                <section class="settings-section eq-section">
                    <h3>Equalizer</h3>
                    <div class="eq-visualizer" id="eqVisualizer">
                        <canvas id="eqCanvas"></canvas>
                        <div class="eq-zero-line"></div>
                    </div>
                    
                    <div class="eq-bands-container">
                        <div class="eq-band" data-band="low">
                            <div class="eq-band-header">
                                <div class="eq-band-indicator low"></div>
                                <h4>Low</h4>
                            </div>
                            <div class="eq-band-controls">
                                <div class="eq-control-row">
                                    <label>Freq</label>
                                    <input type="range" class="eq-freq" data-band="low" min="20" max="500" value="100">
                                    <span class="eq-value eq-freq-value">100 Hz</span>
                                </div>
                                <div class="eq-control-row">
                                    <label>Gain</label>
                                    <input type="range" class="eq-gain" data-band="low" min="-24" max="24" step="0.5" value="0">
                                    <span class="eq-value eq-gain-value">0 dB</span>
                                </div>
                                <div class="eq-control-row">
                                    <label>Q</label>
                                    <input type="range" class="eq-q" data-band="low" min="0.1" max="10" step="0.1" value="1">
                                    <span class="eq-value eq-q-value">1.0</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="eq-band" data-band="lowMid">
                            <div class="eq-band-header">
                                <div class="eq-band-indicator lowmid"></div>
                                <h4>Low-Mid</h4>
                            </div>
                            <div class="eq-band-controls">
                                <div class="eq-control-row">
                                    <label>Freq</label>
                                    <input type="range" class="eq-freq" data-band="lowMid" min="200" max="2000" value="400">
                                    <span class="eq-value eq-freq-value">400 Hz</span>
                                </div>
                                <div class="eq-control-row">
                                    <label>Gain</label>
                                    <input type="range" class="eq-gain" data-band="lowMid" min="-24" max="24" step="0.5" value="0">
                                    <span class="eq-value eq-gain-value">0 dB</span>
                                </div>
                                <div class="eq-control-row">
                                    <label>Q</label>
                                    <input type="range" class="eq-q" data-band="lowMid" min="0.1" max="10" step="0.1" value="1">
                                    <span class="eq-value eq-q-value">1.0</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="eq-band" data-band="mid">
                            <div class="eq-band-header">
                                <div class="eq-band-indicator mid"></div>
                                <h4>Mid</h4>
                            </div>
                            <div class="eq-band-controls">
                                <div class="eq-control-row">
                                    <label>Freq</label>
                                    <input type="range" class="eq-freq" data-band="mid" min="500" max="5000" value="1000">
                                    <span class="eq-value eq-freq-value">1000 Hz</span>
                                </div>
                                <div class="eq-control-row">
                                    <label>Gain</label>
                                    <input type="range" class="eq-gain" data-band="mid" min="-24" max="24" step="0.5" value="0">
                                    <span class="eq-value eq-gain-value">0 dB</span>
                                </div>
                                <div class="eq-control-row">
                                    <label>Q</label>
                                    <input type="range" class="eq-q" data-band="mid" min="0.1" max="10" step="0.1" value="1">
                                    <span class="eq-value eq-q-value">1.0</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="eq-band" data-band="high">
                            <div class="eq-band-header">
                                <div class="eq-band-indicator high"></div>
                                <h4>High</h4>
                            </div>
                            <div class="eq-band-controls">
                                <div class="eq-control-row">
                                    <label>Freq</label>
                                    <input type="range" class="eq-freq" data-band="high" min="2000" max="20000" value="8000">
                                    <span class="eq-value eq-freq-value">8000 Hz</span>
                                </div>
                                <div class="eq-control-row">
                                    <label>Gain</label>
                                    <input type="range" class="eq-gain" data-band="high" min="-24" max="24" step="0.5" value="0">
                                    <span class="eq-value eq-gain-value">0 dB</span>
                                </div>
                                <div class="eq-control-row">
                                    <label>Q</label>
                                    <input type="range" class="eq-q" data-band="high" min="0.1" max="10" step="0.1" value="1">
                                    <span class="eq-value eq-q-value">1.0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Compressor Section -->
                <section class="settings-section compressor-section">
                    <h3>Compressor</h3>
                    <div class="comp-knobs-container">
                        <div class="comp-knob-group">
                            <div class="knob-wrapper">
                                <input type="range" class="comp-threshold knob-input" min="-60" max="0" value="-24">
                                <div class="knob-visual" data-param="threshold"></div>
                            </div>
                            <span class="knob-label">Threshold</span>
                            <span class="knob-value comp-threshold-value">-24 dB</span>
                        </div>
                        <div class="comp-knob-group">
                            <div class="knob-wrapper">
                                <input type="range" class="comp-ratio knob-input" min="1" max="20" step="0.1" value="4">
                                <div class="knob-visual" data-param="ratio"></div>
                            </div>
                            <span class="knob-label">Ratio</span>
                            <span class="knob-value comp-ratio-value">4:1</span>
                        </div>
                        <div class="comp-knob-group">
                            <div class="knob-wrapper">
                                <input type="range" class="comp-attack knob-input" min="0" max="1" step="0.001" value="0.003">
                                <div class="knob-visual" data-param="attack"></div>
                            </div>
                            <span class="knob-label">Attack</span>
                            <span class="knob-value comp-attack-value">3 ms</span>
                        </div>
                        <div class="comp-knob-group">
                            <div class="knob-wrapper">
                                <input type="range" class="comp-release knob-input" min="0" max="1" step="0.001" value="0.25">
                                <div class="knob-visual" data-param="release"></div>
                            </div>
                            <span class="knob-label">Release</span>
                            <span class="knob-value comp-release-value">250 ms</span>
                        </div>
                        <div class="comp-knob-group">
                            <div class="knob-wrapper">
                                <input type="range" class="comp-knee knob-input" min="0" max="40" value="30">
                                <div class="knob-visual" data-param="knee"></div>
                            </div>
                            <span class="knob-label">Knee</span>
                            <span class="knob-value comp-knee-value">30 dB</span>
                        </div>
                        <div class="comp-knob-group">
                            <div class="knob-wrapper">
                                <input type="range" class="comp-makeup knob-input" min="0" max="24" step="0.5" value="0">
                                <div class="knob-visual" data-param="makeup"></div>
                            </div>
                            <span class="knob-label">Makeup</span>
                            <span class="knob-value comp-makeup-value">0 dB</span>
                        </div>
                    </div>
                </section>
                
                <!-- Effects Section -->
                <section class="settings-section effects-section">
                    <h3>Effects</h3>
                    <div class="effects-grid">
                        <div class="effect-section">
                            <h4>Delay</h4>
                            <div class="effect-control">
                                <label>Time</label>
                                <input type="range" class="delay-time" min="0" max="2" step="0.01" value="0.5">
                                <span class="delay-time-value">500 ms</span>
                            </div>
                            <div class="effect-control">
                                <label>Feedback</label>
                                <input type="range" class="delay-feedback" min="0" max="0.9" step="0.01" value="0.3">
                                <span class="delay-feedback-value">30%</span>
                            </div>
                            <div class="effect-control">
                                <label>Mix</label>
                                <input type="range" class="delay-mix" min="0" max="1" step="0.01" value="0">
                                <span class="delay-mix-value">0%</span>
                            </div>
                        </div>
                        <div class="effect-section">
                            <h4>Reverb</h4>
                            <div class="effect-control">
                                <label>Decay</label>
                                <input type="range" class="reverb-decay" min="0" max="10" step="0.1" value="2">
                                <span class="reverb-decay-value">2.0 s</span>
                            </div>
                            <div class="effect-control">
                                <label>Mix</label>
                                <input type="range" class="reverb-mix" min="0" max="1" step="0.01" value="0">
                                <span class="reverb-mix-value">0%</span>
                            </div>
                            <div class="effect-control">
                                <label>Pre-Delay</label>
                                <input type="range" class="reverb-predelay" min="0" max="100" step="1" value="10">
                                <span class="reverb-predelay-value">10 ms</span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script src="audio-engine.js"></script>
    <script src="script.js"></script>
</body>
</html>
